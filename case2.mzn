I = 12;
J = 12;
C = 3141;
CV = 3;
CC = 6;
O_i = [50, 65, 38, 35, 29, 50, 53, 27, 31, 34, 22, 53];
V_i = [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1];
D_ij = 
[|341.93986103683204, 412.18801990139383, 419.2649235862126, 403.902994828706, 382.58292002882604, 358.4434823578046, 389.57045539053934, 385.44075093307845, 382.8964057103475, 345.02935090883625, 338.2683578233758, 396.29870987203
|261.89619379259574, 212.82514928083472, 197.31110592511754, 195.4740490114963, 217.38096907065128, 251.7657005882626, 231.66777508669267, 237.2661102292428, 241.12107100969598, 256.4313052949683, 262.68339481708136, 203.02931907684646
|234.70071805628038, 281.67885993096286, 267.2501339954076, 209.96905096583407, 178.0198958793875, 252.8032365488124, 274.96723296634576, 277.7301888747345, 280.15145334185075, 223.62711130531932, 172.38968702979025, 185.97163413085747
|122.18049699338111, 110.26014040076497, 128.87031139854005, 168.40729961358673, 186.63226069622092, 106.34698922508178, 98.93244084430451, 93.66412854324055, 89.78511042771021, 133.37540865006366, 184.80873323584552, 185.7914924034318
|213.35831725020878, 216.14950264520277, 197.24384752927872, 152.047123857488, 144.01730670068685, 218.6255204114036, 221.74338700541998, 226.73555038404754, 230.50316114335808, 202.8712909814346, 175.9574104719181, 138.56506873413886
|149.7683595350186, 203.19750447908706, 190.91808213375896, 134.88789381459222, 99.6112953256902, 168.9156723736587, 193.7353837536728, 195.92013046347603, 197.9877235310892, 138.90355845487383, 86.95776580993947, 110.79288383571954
|339.5723602949171, 292.32963503276045, 309.460075869326, 364.75769993735713, 393.21831823862055, 319.00915447661106, 295.96616039442347, 292.97829220076244, 290.5021887023701, 349.75868489473066, 402.71197910845945, 387.3386707412973
|277.7692280929494, 256.29403005127705, 275.41236840085907, 322.1840227887518, 342.5684246678623, 262.4082444827081, 250.84571787068487, 246.19698440722507, 242.6601116852798, 289.0958658522018, 339.4887830746059, 341.0127595024098
|247.4185362976616, 324.0858098343809, 327.10279410955343, 301.1219566509797, 274.92278065377434, 267.7955182288367, 302.08935172267053, 299.0519366257703, 297.3766943085015, 247.6348663283967, 229.53256030984605, 289.58546575648285
|284.1431043794245, 208.44595909092894, 204.4631986347227, 240.42146617607114, 275.01504756527663, 264.098326338904, 230.95944858932378, 234.76873903910686, 237.14282065355616, 284.66728665961176, 315.9758140941095, 260.12538695396444
|185.7424649476064, 256.36456390139347, 262.9883965470973, 249.2123978135935, 230.89175999545412, 202.16331721299105, 233.76441301569045, 229.8209700835885, 227.44742959929607, 189.25601450049453, 188.59332960939034, 243.7144334925038
|212.40093791263857, 158.19963037497166, 174.98683386243724, 230.79552431568453, 260.5367375401015, 190.16632232437064, 163.67976821967002, 161.2995941997795, 159.27382210341702, 221.64332541648056, 274.27865746174825, 253.78898378928798
|];
E_ij = 
[|562.909791555248, 668.2820298520908, 678.8973853793188, 655.854492243059, 623.8743800432391, 587.6652235367069, 634.355683085809, 628.1611263996176, 624.3446085655212, 567.5440263632544, 557.4025367350637, 644.4480648080449
|457.8442906888936, 384.2377239212521, 360.9666588876763, 358.2110735172445, 391.0714536059769, 442.6485508823939, 412.501662630039, 420.8991653438642, 426.681606514544, 449.64695794245245, 459.0250922256221, 369.5439786152697
|390.05107708442057, 460.5182898964443, 438.87520099311143, 352.9535764487511, 305.02984381908124, 417.2048548232186, 450.4508494495186, 454.59528331210174, 458.2271800127761, 373.440666957979, 296.5845305446854, 316.95745119628623
|218.27074549007168, 200.39021060114746, 228.3054670978101, 287.6109494203801, 314.9483910443314, 194.5204838376227, 183.39866126645677, 175.49619281486082, 169.6776656415653, 235.0631129750955, 312.2130998537683, 313.6872386051477
|349.0374758753132, 353.22425396780415, 324.8657712939181, 257.070685786232, 245.02596005103027, 356.9382806171054, 361.61508050812995, 369.1033255760713, 374.75474171503714, 333.3069364721519, 292.93611570787715, 236.84760310120828
|274.6525393025279, 354.7962567186306, 336.37712320063844, 252.33184072188834, 199.41694298853528, 303.37350856048806, 340.60307563050924, 343.88019569521407, 346.9815852966338, 258.35533768231073, 180.4366487149092, 216.1893257535793
|562.3585404423757, 491.49445254914065, 517.190113803989, 600.1365499060357, 642.8274773579308, 531.5137317149166, 496.9492405916352, 492.46743830114366, 488.75328305355515, 577.6380273420959, 657.0679686626892, 634.0080061119459
|443.6538421394241, 411.44104507691554, 440.11855260128857, 510.2760341831277, 540.8526370017935, 420.6123667240621, 403.2685768060273, 396.2954766108376, 390.99016752791965, 460.64379877830277, 536.2331746119089, 538.5191392536146
|402.1278044464924, 517.1287147515714, 521.6541911643301, 482.6829349764696, 443.3841709806615, 432.6932773432551, 484.1340275840058, 479.5779049386554, 477.0650414627522, 402.45229949259505, 375.29884046476906, 465.3781986347243
|460.21465656913676, 346.6689386363934, 340.69479795208406, 394.6321992641067, 446.52257134791495, 430.147489508356, 380.4391728839857, 386.1531085586603, 389.71423098033426, 461.0009299894176, 507.9637211411643, 424.1880804309467
|300.6136974214096, 406.5468458520902, 416.48259482064594, 395.81859672039025, 368.3376399931812, 325.24497581948657, 372.64661952353566, 366.73145512538275, 363.1711443989441, 305.8840217507418, 304.8899944140855, 387.5716502387557
|371.60140686895784, 290.2994455624575, 315.48025079365584, 399.19328647352677, 443.80510631015227, 338.24948348655596, 298.51965232950505, 294.9493912996693, 291.9107331551255, 385.46498812472083, 464.4179861926224, 433.683475683932
|];

% Define sets I and J
int: I;
int: J;

int: C; % Cost of installing a warehouse in all zones
int: CV; % Capacity in green zone
int: CC; % Capacity in blue zone

array[1..I] of int: O_i; % Emissions per operation for each warehouse i
array[1..I, 1..J] of float: D_ij; % Distance between warehouse i and store j
array[1..I, 1..J] of float: E_ij; % Transportation emissions
array[1..I] of int: V_i; % 1 if warehouse i is in the green zone, 0 if in the blue zone

% Define decision variables
array[1..I, 1..J] of var 0..1: X; % 1 if warehouse i supplies store j, 0 otherwise
array[1..I] of var 0..1: Y;

% Define constraints

% Add the constraint to ensure Y_i is 1 if the warehouse I supplies at least one store
constraint forall(i in 1..I)(
  sum(j in 1..J)(X[i,j]) > 0 -> Y[i] == 1
);

% Emissions constraint
constraint sum(i in 1..I, j in 1..J)(E_ij[i, j] * X[i, j]) + sum(i in 1..I)(O_i[i] * Y[i]) <= 500 * J;

% Assignment constraint
constraint forall(j in 1..J)(sum(i in 1..I)(X[i, j]) == 1);

% Green zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * V_i[i]) <= CV);

% Blue zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * (1 - V_i[i])) <= CC);

% Solve the optimization problem using a solver
% Define the objective function
solve minimize sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i]);

output ["Solution:", ""];
output ["X = \n", show2d(X), ";"];
output ["\n"];
output ["Y = ", show(Y), ";"];
output ["\n"];
output ["FO = ", show(sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i])), "\n"];