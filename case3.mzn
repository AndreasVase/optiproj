I = 15;
J = 29;
C = 3141;
CV = 4;
CC = 14;
O_i = [50, 65, 38, 35, 29, 50, 53, 27, 31, 34, 22, 53, 66, 58, 54];
V_i = [0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1];
D_ij = 
[|412.8396300832575, 413.18644299731676, 354.1293499322448, 330.78529284304113, 297.54853849274434, 392.45278680133, 391.9990498202773, 399.8033976157809, 314.71178480667743, 328.237463376816, 416.51364605815814, 399.23302609181235, 381.1188987540071, 334.0789141170427, 319.11591806803784, 399.22322410603334, 360.1506173649805, 427.3432324063263, 352.99182390453467, 421.7673519628848, 338.34944113245075, 380.53184957574905, 399.0937443458886, 453.4815956118835, 358.8015066491891, 333.1792344824728, 371.19805684240856, 405.40185788975975, 350.499545662969
|205.38973322305637, 191.4252001451902, 259.9550066588004, 272.37510735721196, 303.02925000203817, 206.43659707405908, 206.86679010835283, 222.875598602123, 297.1324010266846, 281.4182231563504, 182.8448170104831, 201.00452628818965, 248.92762745002463, 271.39513283903955, 286.7438861648355, 199.6297392814237, 239.57238311244924, 171.72281340594472, 247.75486692836847, 192.88202463354003, 260.6131626281635, 220.50523609767222, 211.75150178705752, 149.69479269794957, 240.11842878201873, 279.44127210042654, 234.09222616981194, 194.52800431669831, 257.9229889110559
|269.8959710850416, 237.83380262164772, 262.61406085999016, 233.66242881919524, 228.4332108714927, 193.4798848738385, 194.67437934370642, 277.4815952367439, 263.93661175718063, 255.44043482307097, 212.18320510965344, 216.529260241196, 290.3378637644491, 241.81182499869283, 245.9417851143026, 197.3861385286183, 179.14238965714125, 211.09313382461272, 171.9552934169039, 263.7258694578282, 191.20846641337243, 219.92599840054748, 253.67834078064146, 241.7896391847608, 199.3801387925348, 262.12368889398226, 152.0121811984981, 182.21212072245075, 248.72918395126104
|121.07978566072454, 149.7958470982254, 95.56879896081082, 123.67872341303169, 139.02556833973935, 176.8479327548443, 175.50927319488414, 103.88558894569834, 97.68632740497313, 102.37534322726673, 175.19210568265993, 159.46598851727495, 78.90222690041546, 115.23911280251404, 113.6609540201715, 177.0041830856331, 179.05204235912458, 184.63869022201095, 185.17195895004824, 134.09652806338264, 165.76004214339403, 146.27690819757464, 125.16771504542507, 182.48907821896046, 159.09775084562196, 95.11249120031688, 207.37220092910164, 194.48426899079084, 108.8750110262009
|203.62822856168233, 171.39347316990415, 229.81630634452955, 219.39373519753948, 236.05638220507575, 147.1138518906163, 148.36200519914087, 218.62316538869308, 252.74078682252923, 238.20744215117995, 144.98254811616462, 161.02091944859004, 241.55575304474834, 223.7471396256665, 235.79645208068666, 145.03035538243893, 162.3512931419661, 136.1591292873917, 164.1106264566693, 192.15630633122467, 185.6626037676853, 176.65337757524603, 195.44459779938128, 149.74359582447133, 176.09214436086907, 241.07436471625917, 139.81685938992462, 128.52468404196694, 219.7424851455877
|192.26017262840722, 162.61587597002682, 178.2876829852633, 148.2458453138607, 143.47788103000815, 116.73705073790474, 117.74258654196407, 197.452973569416, 178.34410217827548, 169.9644804287297, 140.1957789995741, 139.86510661966213, 207.69393788295258, 156.50896410686818, 160.34703472792785, 122.11352057909787, 96.05900195900887, 142.38888254056846, 87.80198423980622, 188.13486577684077, 105.9465127466489, 139.45303719483402, 174.75164212801636, 176.33724650389644, 116.05161637912562, 176.76952484757183, 71.33697079715269, 110.16736991797933, 164.27764952557246
|304.88161119409153, 338.5531487809786, 310.1281773062872, 343.5344507078313, 362.3890035478988, 379.05211826098304, 377.77173217564456, 294.4352789514859, 320.8401167161755, 323.5418013920898, 366.2460331671527, 356.98830617545184, 280.36271235314604, 334.6993990745296, 335.78792098796094, 376.4450634068874, 391.95100964751884, 371.5913543957408, 400.0222776449521, 313.9921740082834, 383.5137422194133, 350.9987626830373, 318.8662729281034, 352.34171832878894, 371.8173149036074, 315.6727370876796, 418.64286637410754, 393.3465492424506, 324.20203227990993
|268.61669095190894, 300.6428381833398, 251.6672913593768, 278.2192974986016, 287.6894122974404, 332.1005548888309, 330.7588288946862, 253.39407796800742, 248.78154990839747, 256.44044299395813, 327.5428526000147, 313.39109229953226, 231.52333738370604, 270.15281213390364, 266.33776259256814, 331.6904726783828, 335.03016988984695, 335.86838776200887, 340.82602992037795, 280.62167216201095, 320.7219973349655, 301.6552363556807, 276.93975125126775, 326.9146292928084, 315.15170489996274, 249.81160238027658, 363.4038232332443, 349.26199131087566, 264.9165643025407
|321.9048239764163, 315.2484119803237, 266.3642129387655, 236.30653519093903, 201.59163038863946, 287.1947341161445, 286.97343315889424, 311.9532449212352, 229.62194253533144, 239.95517030158683, 313.39116926938146, 297.96943005132647, 298.47462278689386, 241.7135223553331, 228.37445798575942, 294.378750301554, 252.97613606304756, 323.32096060763405, 244.4576954899283, 328.58168964931235, 233.50664961908802, 280.95202304646836, 305.69069310868923, 352.893320210695, 255.6365892919068, 246.59891149291963, 259.460977345351, 297.71404279965606, 259.2532457443202
|209.67093306501081, 219.6349779688903, 266.8023907682915, 295.2295606618007, 329.9449978951992, 258.22350764237973, 257.84958025074735, 220.80302329559692, 305.70852203174593, 293.19044876621757, 230.36070335207893, 240.4569548854737, 238.87292117194366, 289.9565310828782, 303.8206222165593, 251.0210857921368, 292.2487511539212, 224.19636746388016, 302.8246266206388, 203.20626462263746, 305.0922931516635, 254.0781858622577, 225.98280608499914, 189.69538845328995, 282.3295169729947, 287.4992019816228, 301.2275574933812, 256.62913456253506, 272.54020410729123
|256.6444883482988, 257.15855863991743, 198.12175482149536, 174.62959538649324, 141.93871969499378, 239.05103568267472, 238.4766300781855, 243.97582599383225, 158.9004183191877, 172.0580002899092, 261.84612031270444, 244.0480216815624, 226.40093288994098, 177.7625187743605, 162.78692694023582, 245.51305846056522, 208.56311017595405, 272.9545444573271, 202.68883690750818, 265.4493428823701, 185.67247664895714, 225.0043759774545, 242.76454899411232, 297.8070537872299, 204.81240776898994, 177.24064908415536, 223.65554285454493, 253.34013066691776, 194.1825865529781
|170.64342294773542, 204.225059035036, 182.57494313531032, 218.10022403174347, 242.1858403090298, 245.70738899739297, 244.4536658632364, 161.14831629256764, 201.11243264337833, 200.20541740121266, 231.8414624728623, 223.25892897942296, 149.94152122502612, 209.22843359414063, 213.29656880971322, 242.72089716732793, 261.18449273928553, 237.01152145585496, 269.9444102403559, 179.45885004018487, 255.3678910167323, 218.62492913345943, 185.31792712444596, 218.18841331773572, 241.37964985062862, 192.01402300532254, 286.8873889987395, 259.3835944662175, 196.4082492180944
|128.38594342425176, 159.86283055025973, 158.59672389665522, 195.05501819082, 224.951388396281, 204.7100608064451, 203.58499746780768, 124.40254321677187, 187.44793381580362, 181.65404024071015, 186.1048399328277, 181.47880573196068, 123.16161879903315, 186.72546602970743, 194.94027092266603, 200.37994086480688, 226.49109138265325, 189.1130463550142, 236.37464543748692, 133.98081649363178, 225.9080350290017, 181.61723697752154, 145.9060055490317, 165.27602656306803, 208.12142216946657, 173.68250724065527, 249.24124098006337, 215.60681624948458, 170.8632635121445
|199.49377433646347, 230.22931287102574, 228.80821917050395, 265.3619648534544, 294.0550401576241, 275.5278023684735, 274.43350599774607, 195.89109444947943, 255.12010282685213, 250.76975083083144, 255.7669310894515, 252.27578408356644, 193.53562250704005, 256.86057802038306, 264.1251013178328, 270.93111194764793, 297.95343205163465, 257.8483030110049, 307.8598361635133, 204.34670491446275, 297.2532001922779, 253.02878056341837, 217.24449998638767, 231.32036932175177, 279.61024346372125, 242.65347464479055, 320.43087374464864, 285.6655865502718, 241.48199060936025
|212.29817090110748, 208.03181324548675, 156.17749872490663, 127.1239177654995, 92.61207758042171, 185.30339579464018, 184.84712736452485, 201.86559354200338, 119.59365152968623, 129.74985729913902, 209.57036664858114, 192.68007772055498, 188.37282856470523, 132.0035795668267, 118.31389705030153, 192.07479160779553, 153.37500657023716, 220.28448473946946, 146.79686016642253, 219.5578627145692, 131.23719105390202, 174.47365282980982, 196.62140456741776, 247.34804587190115, 151.7193190457179, 136.39464912221928, 166.91010984925586, 198.53764862724074, 149.42431834742266
|];
E_ij = 
[|669.2594451248863, 669.7796644959751, 581.1940248983672, 546.1779392645617, 496.3228077391165, 638.679180201995, 637.998574730416, 649.7050964236714, 522.0676772100162, 542.356195065224, 674.7704690872372, 648.8495391377185, 621.6783481310106, 551.1183711755641, 528.6738771020567, 648.83483615905, 590.2259260474708, 691.0148486094895, 579.487735856802, 682.6510279443272, 557.5241616986762, 620.7977743636236, 648.6406165188329, 730.2223934178253, 588.2022599737836, 549.7688517237092, 606.7970852636129, 658.1027868346396, 575.7493184944535
|373.08459983458454, 352.1378002177853, 454.93250998820065, 473.56266103581794, 519.5438750030572, 374.6548956110886, 375.30018516252926, 399.3133979031845, 510.69860154002686, 487.12733473452556, 339.26722551572465, 366.50678943228445, 438.39144117503696, 472.0926992585593, 495.11582924725326, 364.44460892213556, 424.3585746686739, 322.58422010891707, 436.6323003925527, 354.32303695031004, 455.9197439422452, 395.75785414650835, 382.62725268058625, 289.54218904692436, 425.17764317302806, 484.1619081506398, 416.1383392547179, 356.79200647504746, 451.8844833665838
|442.8439566275624, 394.7507039324716, 431.92109128998527, 388.49364322879285, 380.649816307239, 328.21982731075775, 330.01156901555964, 454.2223928551158, 433.90491763577097, 421.16065223460646, 356.27480766448014, 362.793890361794, 473.5067956466736, 400.71773749803924, 406.91267767145393, 334.07920779292743, 306.71358448571186, 354.63970073691905, 295.93294012535586, 433.5888041867423, 324.81269962005865, 367.8889976008212, 418.51751117096217, 400.68445877714123, 337.0702081888022, 431.1855333409734, 266.01827179774716, 311.3181810836761, 411.09377592689157
|216.6196784910868, 259.6937706473381, 178.35319844121625, 220.51808511954755, 243.538352509609, 300.2718991322664, 298.2639097923262, 190.8283834185475, 181.5294911074597, 188.56301484090008, 297.78815852398986, 274.19898277591244, 153.35334035062317, 207.85866920377106, 205.49143103025725, 300.50627462844966, 303.5780635386869, 311.9580353330164, 312.7579384250723, 236.14479209507397, 283.64006321509106, 254.41536229636196, 222.7515725681376, 308.7336173284407, 273.64662626843295, 177.66873680047533, 346.05830139365247, 326.72640348618626, 198.31251653930133
|334.4423428425235, 286.09020975485623, 373.72445951679435, 358.0906027963092, 383.0845733076136, 249.67077783592447, 251.5430077987113, 356.9347480830396, 408.11118023379385, 386.3111632267699, 246.47382217424695, 270.53137917288507, 391.3336295671225, 364.6207094384998, 382.69467812103, 246.5455330736584, 272.5269397129491, 233.23869393108754, 275.165939685004, 317.234459496837, 307.49390565152794, 293.980066362869, 322.1668966990719, 253.615393736707, 293.1382165413036, 390.61154707438874, 238.72528908488692, 221.78702606295042, 358.61372771838154
|338.39025894261084, 293.92381395504026, 317.431524477895, 272.36876797079105, 265.21682154501224, 225.10557610685711, 226.6138798129461, 346.179460354124, 317.5161532674132, 304.9467206430945, 260.29366849936116, 259.7976599294932, 361.5409068244289, 284.76344616030224, 290.5205520918918, 233.17028086864678, 194.0885029385133, 263.5833238108527, 181.70297635970934, 332.20229866526114, 208.91976911997335, 259.17955579225105, 312.12746319202455, 314.5058697558446, 224.07742456868843, 315.15428727135776, 157.00545619572904, 215.251054876969, 296.4164742883587
|510.3224167911373, 560.8297231714679, 518.1922659594309, 568.301676061747, 596.5835053218482, 621.5781773914746, 619.6575982634669, 494.6529184272288, 534.2601750742632, 538.3127020881346, 602.369049750729, 588.4824592631778, 473.5440685297191, 555.0490986117944, 556.6818814819414, 617.6675951103311, 640.9265144712783, 610.3870315936111, 653.0334164674282, 523.9882610124251, 628.2706133291199, 579.4981440245559, 531.2994093921551, 581.5125774931835, 610.725972355411, 526.5091056315193, 680.9642995611613, 643.0198238636758, 539.3030484198649
|429.9250364278634, 477.9642572750097, 404.5009370390652, 444.32894624790237, 458.5341184461606, 525.1508323332464, 523.1382433420292, 407.09111695201113, 400.1723248625962, 411.66066449093717, 518.3142789000221, 497.0866384492984, 374.28500607555907, 432.2292182008555, 426.5066438888522, 524.5357090175742, 529.5452548347704, 530.8025816430134, 538.2390448805669, 447.9325082430164, 508.0829960024483, 479.48285453352105, 442.4096268769016, 517.3719439392125, 499.7275573499441, 401.7174035704149, 572.1057348498664, 550.8929869663135, 424.374846453811
|513.8572359646245, 503.8726179704855, 430.54631940814824, 385.45980278640855, 333.3874455829592, 461.7921011742168, 461.46014973834133, 498.9298673818528, 375.4329138029972, 390.93275545238026, 501.0867539040722, 477.9541450769897, 478.7119341803408, 393.57028353299967, 373.56168697863916, 472.56812545233106, 410.46420409457136, 515.981440911451, 397.6865432348925, 523.8725344739685, 381.25997442863206, 452.4280345697025, 489.5360396630339, 560.3399803160424, 414.4548839378602, 400.89836723937947, 420.1914660180265, 477.5710641994841, 419.87986861648034
|348.50639959751624, 363.45246695333543, 434.20358615243725, 476.84434099270106, 528.9174968427988, 421.3352614635696, 420.77437037612106, 365.2045349433954, 492.5627830476189, 473.7856731493264, 379.5410550281184, 394.68543232821054, 392.3093817579155, 468.9347966243173, 489.73093332483893, 410.5316286882052, 472.37312673088184, 370.29455119582025, 488.2369399309582, 338.8093969339562, 491.63843972749527, 415.11727879338656, 372.97420912749874, 318.5430826799349, 457.4942754594921, 465.2488029724342, 485.84133624007177, 418.9437018438026, 442.8103061609369
|406.9667325224482, 407.7378379598762, 319.182632232243, 283.9443930797398, 234.90807954249067, 380.57655352401207, 379.71494511727826, 387.96373899074837, 260.3506274787816, 280.0870004348638, 414.76918046905666, 388.0720325223436, 361.60139933491143, 288.64377816154075, 266.1803904103537, 390.26958769084786, 334.84466526393106, 431.4318166859906, 326.03325536126226, 420.1740143235552, 300.5087149734357, 359.5065639661817, 386.14682349116845, 468.7105806808448, 329.2186116534849, 287.86097362623303, 357.4833142818174, 402.01019600037665, 313.27387982946715
|308.9651344216031, 359.337588552554, 326.86241470296545, 380.1503360476152, 416.2787604635447, 421.56108349608945, 419.6804987948546, 294.72247443885146, 354.6686489650675, 353.30812610181897, 400.76219370929346, 387.8883934691344, 277.9122818375392, 366.84265039121095, 372.94485321456983, 417.0813457509919, 444.77673910892827, 408.5172821837824, 457.9166153605339, 322.1882750602773, 436.05183652509845, 380.93739370018915, 330.9768906866689, 380.2826199766036, 415.0694747759429, 341.0210345079838, 483.33108349810925, 442.07539169932625, 347.6123738271416
|258.57891513637765, 305.79424582538957, 303.8950858449828, 358.58252728623, 403.4270825944215, 373.0650912096677, 371.37749620171155, 252.60381482515783, 347.17190072370545, 338.4810603610652, 345.1572598992416, 338.21820859794104, 250.74242819854973, 346.0881990445612, 358.41040638399903, 366.5699112972103, 405.73663707397986, 349.66956953252134, 420.56196815623036, 266.97122474044767, 404.86205254350256, 338.4258554662823, 284.8590083235475, 313.91403984460203, 378.18213325419987, 326.5237608609829, 439.86186147009505, 389.41022437422686, 322.29489526821675
|357.2406615046952, 403.3439693065386, 401.21232875575595, 456.04294728018164, 499.08256023643617, 471.29170355271026, 469.6502589966191, 351.83664167421915, 440.68015424027817, 434.1546262462472, 441.65039663417724, 436.41367612534964, 348.3034337605601, 443.2908670305746, 454.1876519767492, 464.39666792147193, 504.930148077452, 444.7724545165073, 519.7897542452699, 364.5200573716941, 503.87980028841685, 437.5431708451275, 383.8667499795815, 404.98055398262767, 477.4153651955819, 421.9802119671858, 538.646310616973, 486.4983798254077, 420.22298591404035
|372.4472563516612, 366.0477198682301, 288.26624808735994, 244.68587664824923, 192.91811637063256, 331.95509369196026, 331.2706910467873, 356.7983903130051, 233.39047729452935, 248.62478594870853, 368.3555499728717, 343.02011658083245, 336.5592428470578, 252.00536935024002, 231.4708455754523, 342.1121874116933, 284.06250985535576, 384.4267271092042, 274.1952902496338, 383.33679407185383, 250.85578658085302, 315.71047924471475, 348.9321068511266, 425.0220688078517, 281.5789785685769, 258.5919736833289, 304.3651647738838, 351.8064729408611, 278.136477521134
|];

% Define sets I and J
int: I;
int: J;

int: C; % Cost of installing a warehouse in all zones
int: CV; % Capacity in green zone
int: CC; % Capacity in blue zone

array[1..I] of int: O_i; % Emissions per operation for each warehouse i
array[1..I, 1..J] of float: D_ij; % Distance between warehouse i and store j
array[1..I, 1..J] of float: E_ij; % Transportation emissions
array[1..I] of int: V_i; % 1 if warehouse i is in the green zone, 0 if in the blue zone

% Define decision variables
array[1..I, 1..J] of var 0..1: X; % 1 if warehouse i supplies store j, 0 otherwise
array[1..I] of var 0..1: Y;

% Define constraints

% Add the constraint to ensure Y_i is 1 if the warehouse I supplies at least one store
constraint forall(i in 1..I)(
  sum(j in 1..J)(X[i,j]) > 0 -> Y[i] == 1
);

% Emissions constraint
constraint sum(i in 1..I, j in 1..J)(E_ij[i, j] * X[i, j]) + sum(i in 1..I)(O_i[i] * Y[i]) <= 500 * J;

% Assignment constraint
constraint forall(j in 1..J)(sum(i in 1..I)(X[i, j]) == 1);

% Green zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * V_i[i]) <= CV);

% Blue zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * (1 - V_i[i])) <= CC);

% Solve the optimization problem using a solver
% Define the objective function
solve minimize sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i]);

output ["Solution:", ""];
output ["X = \n", show2d(X), ";"];
output ["\n"];
output ["Y = ", show(Y), ";"];
output ["\n"];
output ["FO = ", show(sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i])), "\n"];