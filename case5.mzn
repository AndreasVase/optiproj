I = 30;
J = 42;
C = 1370;
CV = 5;
CC = 11;
O_i = [53, 26, 28, 36, 48, 33, 59, 20, 20, 58, 27, 20, 30, 61, 43, 38, 59, 21, 56, 64, 34, 53, 52, 50, 51, 61, 34, 62, 39, 28];
V_i = [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1];
D_ij = 
[|174, 228, 289, 235, 251, 207, 197, 215, 220, 256, 262, 214, 208, 222, 228, 204, 179, 174, 229, 228, 261, 243, 203, 179, 192, 165, 257, 245, 265, 241, 195, 268, 253, 241, 252, 276, 257, 287, 217, 230, 235, 205
|195, 254, 312, 248, 273, 236, 216, 226, 241, 281, 284, 225, 234, 248, 258, 218, 190, 193, 241, 242, 285, 249, 232, 196, 216, 187, 268, 260, 284, 254, 205, 294, 273, 248, 260, 294, 266, 310, 233, 239, 242, 218
|216, 154, 109, 192, 146, 172, 199, 212, 174, 130, 134, 216, 174, 160, 150, 210, 237, 220, 199, 192, 130, 222, 176, 223, 194, 222, 187, 175, 144, 189, 232, 116, 147, 213, 204, 140, 194, 110, 194, 213, 220, 210
|270, 211, 153, 230, 193, 231, 250, 253, 224, 183, 181, 256, 231, 217, 212, 255, 283, 272, 238, 233, 180, 252, 235, 272, 249, 277, 219, 214, 185, 226, 274, 171, 193, 245, 234, 177, 225, 155, 238, 249, 253, 255
|145, 83, 63, 137, 87, 97, 131, 153, 109, 66, 76, 157, 101, 87, 74, 148, 171, 150, 143, 134, 69, 173, 101, 155, 123, 149, 140, 121, 93, 136, 169, 53, 89, 162, 157, 94, 148, 63, 132, 160, 168, 148
|216, 199, 156, 149, 163, 219, 195, 164, 181, 179, 163, 164, 209, 204, 222, 177, 198, 213, 152, 157, 170, 133, 222, 203, 210, 227, 125, 146, 146, 142, 182, 181, 161, 136, 126, 136, 123, 157, 170, 148, 141, 177
|70, 132, 186, 122, 146, 117, 90, 101, 115, 157, 158, 100, 113, 127, 142, 91, 65, 67, 116, 115, 160, 129, 114, 68, 92, 65, 143, 133, 157, 128, 80, 170, 147, 126, 137, 167, 142, 184, 106, 115, 121, 92
|158, 132, 172, 201, 165, 119, 163, 203, 159, 147, 164, 207, 131, 129, 107, 190, 197, 165, 203, 194, 156, 238, 118, 177, 145, 152, 218, 192, 182, 204, 206, 146, 168, 227, 229, 190, 224, 171, 183, 219, 230, 190
|270, 289, 275, 219, 260, 300, 258, 217, 260, 283, 267, 214, 288, 291, 315, 232, 234, 263, 216, 225, 275, 181, 301, 251, 277, 279, 204, 229, 248, 216, 220, 291, 258, 192, 191, 244, 197, 275, 237, 201, 190, 231
|230, 285, 314, 231, 279, 281, 236, 212, 256, 299, 291, 208, 271, 283, 305, 217, 195, 223, 224, 232, 297, 203, 279, 214, 250, 232, 237, 248, 279, 234, 195, 313, 278, 211, 221, 284, 231, 313, 233, 209, 203, 217
|404, 355, 292, 348, 327, 377, 382, 370, 358, 326, 318, 372, 373, 361, 363, 378, 406, 405, 355, 354, 319, 355, 381, 401, 387, 414, 329, 336, 313, 342, 392, 316, 326, 352, 340, 303, 332, 294, 363, 360, 359, 377
|132, 191, 249, 189, 210, 172, 154, 168, 179, 218, 221, 167, 171, 185, 195, 159, 132, 131, 183, 182, 222, 195, 168, 135, 152, 124, 211, 200, 223, 195, 148, 231, 211, 193, 204, 233, 209, 247, 172, 182, 187, 159
|279, 217, 176, 259, 213, 232, 264, 279, 240, 195, 200, 283, 236, 222, 208, 277, 303, 284, 267, 259, 196, 290, 236, 288, 257, 284, 255, 242, 212, 257, 298, 181, 214, 281, 272, 207, 262, 177, 260, 281, 288, 277
|130, 164, 176, 97, 146, 169, 123, 85, 133, 168, 157, 81, 157, 164, 189, 97, 92, 123, 91, 100, 164, 61, 169, 111, 142, 138, 95, 113, 141, 97, 81, 181, 144, 71, 79, 143, 88, 175, 107, 74, 65, 97
|197, 158, 182, 229, 186, 151, 198, 235, 188, 165, 181, 239, 163, 157, 132, 224, 235, 204, 233, 223, 173, 267, 152, 215, 180, 193, 242, 217, 200, 231, 242, 159, 189, 256, 255, 206, 249, 181, 213, 249, 260, 224
|256, 313, 343, 260, 307, 307, 264, 241, 284, 327, 320, 237, 298, 310, 332, 245, 223, 250, 253, 260, 325, 232, 305, 241, 277, 258, 267, 277, 308, 263, 223, 341, 306, 240, 251, 313, 260, 342, 261, 239, 233, 245
|235, 229, 276, 291, 264, 210, 248, 288, 251, 249, 264, 291, 222, 224, 205, 274, 272, 242, 292, 284, 258, 325, 208, 254, 229, 226, 311, 286, 282, 296, 285, 249, 267, 316, 320, 291, 317, 275, 271, 306, 316, 274
|92, 96, 156, 150, 132, 74, 105, 145, 112, 123, 136, 148, 84, 90, 80, 131, 130, 99, 151, 142, 131, 183, 71, 112, 87, 84, 172, 148, 150, 156, 142, 129, 134, 174, 178, 160, 177, 154, 129, 163, 174, 131
|213, 238, 234, 168, 213, 247, 203, 163, 208, 236, 222, 159, 235, 240, 264, 176, 176, 206, 164, 174, 230, 129, 248, 193, 222, 221, 157, 180, 203, 166, 163, 246, 211, 140, 142, 202, 149, 234, 183, 147, 137, 176
|260, 228, 171, 195, 193, 250, 238, 215, 218, 202, 188, 216, 242, 234, 246, 225, 251, 258, 200, 202, 193, 191, 254, 251, 249, 271, 172, 187, 175, 189, 235, 198, 191, 191, 179, 165, 173, 173, 214, 201, 197, 225
|320, 338, 320, 268, 308, 350, 308, 267, 309, 330, 314, 264, 337, 340, 363, 282, 285, 314, 265, 275, 322, 231, 351, 301, 327, 329, 252, 277, 295, 264, 271, 337, 305, 241, 240, 290, 245, 320, 286, 250, 239, 281
|157, 217, 258, 178, 219, 208, 168, 156, 192, 236, 232, 152, 201, 214, 233, 155, 129, 151, 170, 175, 236, 161, 206, 145, 179, 156, 191, 194, 224, 182, 135, 250, 219, 166, 178, 231, 186, 257, 172, 160, 158, 155
|208, 146, 120, 199, 150, 159, 195, 217, 173, 130, 139, 221, 164, 151, 134, 212, 236, 213, 206, 198, 132, 234, 162, 219, 186, 211, 200, 183, 154, 198, 233, 116, 152, 224, 217, 153, 208, 120, 196, 222, 230, 212
|204, 143, 92, 175, 131, 162, 186, 196, 161, 117, 119, 199, 163, 149, 142, 195, 222, 208, 182, 176, 115, 203, 166, 209, 182, 210, 168, 158, 127, 171, 216, 104, 131, 195, 185, 122, 176, 94, 178, 196, 202, 195
|283, 322, 328, 253, 302, 326, 279, 242, 290, 325, 312, 238, 314, 322, 346, 253, 244, 275, 248, 258, 319, 215, 325, 264, 297, 289, 248, 268, 295, 253, 235, 336, 300, 226, 231, 295, 240, 327, 265, 231, 221, 253
|152, 91, 82, 151, 102, 101, 140, 166, 119, 79, 92, 170, 108, 94, 77, 159, 181, 157, 157, 148, 84, 188, 105, 163, 129, 154, 157, 136, 110, 151, 181, 67, 104, 177, 172, 112, 165, 81, 144, 174, 183, 159
|166, 111, 50, 127, 89, 133, 146, 149, 121, 82, 78, 153, 130, 117, 118, 151, 179, 169, 135, 130, 77, 153, 137, 168, 147, 174, 119, 111, 81, 124, 171, 71, 89, 145, 135, 74, 126, 52, 134, 148, 153, 151
|264, 262, 229, 200, 228, 279, 246, 209, 239, 247, 230, 207, 268, 266, 287, 223, 237, 259, 200, 208, 238, 172, 281, 248, 263, 275, 179, 203, 211, 195, 221, 251, 225, 179, 172, 204, 174, 229, 221, 190, 181, 223
|96, 154, 212, 153, 173, 136, 117, 133, 142, 181, 184, 132, 134, 148, 160, 123, 97, 94, 147, 146, 185, 162, 133, 98, 116, 88, 175, 163, 186, 159, 113, 194, 174, 159, 170, 196, 174, 210, 136, 148, 153, 123
|183, 239, 271, 189, 235, 234, 190, 168, 211, 254, 247, 164, 225, 236, 258, 172, 149, 176, 181, 188, 253, 164, 232, 168, 204, 185, 197, 206, 236, 192, 150, 268, 234, 171, 182, 242, 191, 270, 188, 168, 163, 172
|];
E_ij = 
[|314, 395, 486, 405, 430, 364, 348, 376, 384, 438, 446, 375, 366, 386, 395, 360, 322, 314, 397, 395, 445, 418, 358, 322, 341, 300, 439, 420, 451, 415, 346, 456, 432, 414, 431, 467, 438, 484, 378, 398, 406, 360
|319, 408, 494, 398, 435, 380, 350, 365, 388, 448, 452, 363, 378, 399, 414, 353, 312, 316, 388, 389, 454, 399, 374, 320, 350, 307, 429, 416, 453, 407, 333, 467, 436, 399, 417, 468, 426, 491, 375, 384, 389, 354
|353, 260, 191, 316, 248, 286, 327, 347, 290, 224, 229, 352, 289, 268, 253, 344, 384, 359, 327, 316, 223, 361, 292, 363, 320, 361, 309, 290, 244, 312, 376, 203, 249, 347, 334, 238, 320, 193, 319, 348, 358, 344
|441, 353, 266, 382, 326, 383, 411, 416, 373, 311, 308, 420, 382, 362, 355, 418, 461, 445, 393, 386, 306, 415, 389, 445, 410, 452, 365, 358, 314, 375, 448, 292, 326, 404, 388, 302, 374, 269, 393, 410, 416, 418
|266, 172, 143, 253, 179, 194, 245, 278, 211, 147, 163, 284, 200, 179, 159, 270, 305, 273, 263, 250, 152, 308, 199, 280, 232, 272, 258, 229, 188, 252, 302, 127, 181, 292, 283, 190, 271, 143, 246, 288, 301, 270
|358, 332, 267, 256, 278, 362, 326, 280, 305, 302, 278, 279, 346, 340, 366, 299, 331, 353, 261, 268, 288, 233, 366, 338, 348, 374, 221, 253, 252, 247, 306, 304, 274, 238, 222, 238, 218, 268, 288, 255, 245, 299
|164, 257, 338, 242, 279, 235, 194, 210, 232, 295, 296, 209, 228, 249, 272, 196, 157, 160, 233, 232, 299, 252, 230, 162, 197, 156, 274, 259, 295, 251, 180, 315, 280, 248, 265, 310, 273, 335, 218, 232, 240, 197
|257, 218, 279, 321, 268, 198, 265, 325, 259, 241, 266, 330, 217, 213, 180, 305, 315, 268, 325, 311, 255, 377, 197, 286, 237, 249, 347, 309, 293, 327, 329, 239, 272, 361, 363, 305, 357, 277, 294, 348, 365, 305
|425, 454, 433, 348, 411, 471, 407, 346, 410, 444, 421, 342, 452, 457, 492, 368, 372, 415, 344, 358, 433, 292, 472, 396, 436, 439, 326, 364, 392, 344, 351, 457, 407, 308, 307, 387, 315, 433, 375, 321, 305, 367
|403, 486, 530, 405, 476, 479, 412, 376, 443, 506, 495, 370, 465, 482, 515, 383, 351, 393, 394, 406, 503, 363, 476, 380, 433, 406, 414, 431, 476, 409, 351, 527, 475, 375, 390, 484, 404, 528, 407, 372, 363, 383
|633, 559, 465, 550, 518, 593, 600, 583, 564, 516, 504, 586, 587, 569, 572, 594, 636, 634, 560, 558, 506, 560, 599, 628, 608, 648, 521, 531, 497, 540, 616, 501, 516, 555, 537, 481, 526, 468, 572, 567, 566, 593
|219, 306, 394, 304, 336, 278, 251, 272, 288, 347, 352, 271, 276, 297, 313, 258, 219, 217, 295, 294, 353, 312, 273, 222, 249, 207, 336, 320, 354, 313, 242, 366, 337, 309, 327, 370, 334, 391, 279, 294, 301, 258
|449, 356, 295, 419, 350, 378, 426, 449, 390, 323, 331, 455, 384, 363, 343, 445, 485, 456, 430, 419, 324, 465, 384, 462, 416, 456, 412, 393, 348, 415, 478, 302, 351, 451, 438, 341, 424, 296, 420, 452, 462, 445
|257, 308, 325, 206, 280, 315, 246, 189, 261, 314, 296, 183, 297, 308, 344, 207, 200, 246, 197, 212, 307, 152, 315, 227, 274, 269, 204, 230, 273, 207, 182, 332, 278, 168, 179, 276, 193, 324, 222, 172, 158, 206
|339, 280, 316, 386, 323, 270, 340, 396, 326, 291, 315, 402, 288, 278, 242, 379, 396, 350, 392, 377, 303, 444, 271, 366, 314, 333, 406, 369, 344, 390, 406, 282, 326, 428, 426, 353, 417, 315, 363, 417, 433, 379
|423, 507, 553, 429, 499, 499, 434, 399, 465, 529, 518, 393, 485, 503, 536, 406, 372, 413, 417, 429, 526, 387, 496, 400, 454, 425, 438, 454, 500, 433, 373, 550, 498, 399, 414, 507, 428, 551, 430, 396, 387, 406
|412, 402, 474, 496, 455, 375, 431, 491, 436, 432, 456, 496, 393, 395, 367, 470, 467, 422, 498, 485, 446, 547, 372, 441, 403, 398, 526, 489, 482, 503, 486, 433, 459, 533, 539, 495, 535, 472, 466, 518, 534, 470
|159, 166, 255, 247, 219, 133, 179, 239, 190, 205, 225, 243, 148, 157, 142, 218, 216, 170, 247, 235, 218, 296, 128, 189, 152, 147, 279, 243, 246, 255, 234, 215, 222, 282, 289, 261, 286, 252, 215, 266, 282, 218
|375, 414, 407, 308, 376, 427, 360, 300, 368, 410, 389, 295, 408, 416, 452, 321, 320, 365, 302, 317, 401, 250, 428, 346, 389, 388, 292, 326, 361, 305, 301, 425, 373, 266, 269, 359, 280, 407, 331, 277, 261, 320
|455, 406, 321, 357, 354, 440, 421, 386, 392, 367, 346, 388, 427, 415, 433, 402, 440, 452, 365, 368, 354, 350, 445, 441, 437, 471, 323, 345, 327, 347, 417, 362, 350, 350, 332, 311, 324, 323, 386, 365, 360, 402
|515, 541, 514, 436, 496, 559, 496, 435, 498, 529, 505, 431, 540, 544, 579, 457, 461, 505, 432, 446, 517, 381, 560, 486, 524, 528, 412, 450, 476, 431, 440, 540, 492, 396, 394, 470, 402, 514, 464, 410, 393, 456
|289, 379, 441, 320, 382, 366, 306, 287, 341, 408, 401, 282, 354, 374, 403, 286, 247, 280, 308, 316, 408, 295, 362, 271, 322, 288, 340, 344, 389, 327, 255, 429, 382, 302, 320, 400, 332, 438, 312, 293, 290, 286
|364, 272, 232, 351, 278, 290, 345, 377, 311, 247, 260, 383, 298, 278, 253, 370, 406, 372, 362, 349, 251, 403, 295, 380, 331, 369, 353, 326, 283, 349, 402, 226, 280, 388, 378, 281, 365, 233, 346, 385, 398, 370
|356, 265, 189, 312, 247, 293, 329, 344, 291, 226, 228, 349, 295, 274, 263, 343, 384, 362, 324, 314, 223, 355, 299, 364, 324, 366, 303, 287, 241, 307, 374, 206, 247, 342, 328, 233, 314, 191, 317, 344, 353, 343
|476, 534, 543, 431, 504, 540, 470, 415, 487, 538, 519, 409, 522, 534, 570, 431, 417, 464, 423, 438, 530, 374, 539, 447, 497, 485, 423, 453, 493, 430, 404, 555, 501, 391, 398, 494, 411, 542, 448, 398, 383, 431
|289, 198, 184, 288, 214, 213, 272, 310, 240, 180, 199, 316, 223, 203, 176, 300, 333, 297, 297, 283, 188, 344, 218, 306, 255, 293, 296, 265, 226, 288, 332, 162, 217, 327, 320, 229, 308, 183, 277, 322, 336, 300
|284, 200, 109, 225, 168, 233, 253, 258, 215, 157, 151, 264, 229, 210, 211, 260, 303, 287, 237, 229, 150, 264, 239, 287, 254, 296, 212, 201, 156, 220, 290, 141, 168, 252, 237, 145, 223, 112, 235, 256, 264, 260
|459, 455, 405, 362, 404, 481, 431, 375, 420, 432, 408, 373, 464, 462, 492, 397, 418, 451, 363, 374, 419, 320, 484, 434, 457, 475, 330, 367, 379, 354, 393, 439, 400, 331, 321, 369, 323, 406, 394, 348, 334, 397
|183, 271, 357, 269, 299, 244, 215, 238, 252, 311, 316, 237, 241, 262, 279, 223, 185, 180, 260, 259, 317, 282, 238, 186, 213, 171, 302, 284, 318, 278, 209, 331, 301, 277, 294, 333, 301, 355, 243, 261, 269, 223
|303, 387, 435, 311, 380, 379, 313, 281, 345, 409, 399, 275, 365, 383, 415, 286, 252, 293, 300, 310, 407, 274, 376, 280, 334, 305, 324, 337, 383, 316, 253, 430, 379, 284, 301, 391, 314, 434, 311, 280, 272, 286
|];

% Define sets I and J
int: I;
int: J;

int: C; % Cost of installing a warehouse in all zones
int: CV; % Capacity in green zone
int: CC; % Capacity in blue zone

array[1..I] of int: O_i; % Emissions per operation for each warehouse i
array[1..I, 1..J] of int: D_ij; % Distance between warehouse i and store j
array[1..I, 1..J] of int: E_ij; % Transportation emissions
array[1..I] of int: V_i; % 1 if warehouse i is in the green zone, 0 if in the blue zone

% Define decision variables
array[1..I, 1..J] of var 0..1: X; % 1 if warehouse i supplies store j, 0 otherwise
array[1..I] of var 0..1: Y;

% Define constraints

% Add the constraint to ensure Y_i is 1 if the warehouse I supplies at least one store
constraint forall(i in 1..I)(
  sum(j in 1..J)(X[i,j]) > 0 -> Y[i] == 1
);

% Emissions constraint
constraint sum(i in 1..I, j in 1..J)(E_ij[i, j] * X[i, j]) + sum(i in 1..I)(O_i[i] * Y[i]) <= 500 * J;

% Assignment constraint
constraint forall(j in 1..J)(sum(i in 1..I)(X[i, j]) == 1);

% Green zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * V_i[i]) <= CV);

% Blue zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * (1 - V_i[i])) <= CC);

% Solve the optimization problem using a solver
% Define the objective function
solve minimize sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i]);

output ["Solution:", ""];
output ["X = \n", show2d(X), ";"];
output ["\n"];
output ["Y = ", show(Y), ";"];
output ["\n"];
output ["FO = ", show(sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i])), "\n"];