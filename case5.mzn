I = 28;
J = 41;
C = 3073;
CV = 4;
CC = 15;
O_i = [36, 66, 61, 67, 67, 34, 47, 63, 40, 61, 36, 61, 56, 40, 67, 56, 34, 36, 36, 68, 39, 40, 62, 32, 63, 56, 46, 35];
V_i = [0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1];
D_ij = 
[|235, 212, 208, 288, 165, 215, 248, 264, 202, 193, 285, 155, 262, 228, 242, 242, 277, 201, 263, 213, 201, 230, 238, 185, 255, 247, 253, 297, 222, 162, 234, 249, 213, 297, 232, 162, 184, 188, 221, 277, 292
|15, 112, 41, 119, 117, 134, 115, 107, 123, 43, 92, 116, 62, 57, 136, 128, 110, 44, 69, 55, 123, 21, 82, 114, 59, 50, 69, 109, 101, 116, 45, 47, 75, 118, 18, 97, 112, 62, 92, 81, 130
|227, 192, 196, 270, 145, 193, 228, 246, 181, 182, 270, 135, 250, 214, 220, 221, 260, 190, 250, 200, 180, 221, 222, 165, 242, 235, 239, 281, 203, 142, 222, 238, 197, 280, 223, 145, 164, 175, 203, 263, 273
|37, 146, 78, 134, 156, 167, 142, 128, 159, 82, 100, 155, 73, 86, 166, 157, 127, 82, 82, 89, 158, 50, 109, 151, 75, 70, 88, 116, 132, 154, 71, 63, 109, 129, 45, 137, 150, 101, 124, 89, 146
|105, 87, 71, 152, 50, 99, 118, 129, 83, 57, 147, 40, 125, 90, 120, 117, 142, 65, 125, 75, 83, 97, 101, 65, 117, 110, 115, 159, 91, 46, 97, 113, 76, 160, 100, 33, 63, 51, 87, 139, 158
|183, 104, 142, 185, 65, 96, 139, 161, 88, 135, 196, 63, 185, 149, 124, 127, 176, 137, 182, 137, 88, 172, 145, 79, 177, 173, 170, 203, 119, 65, 162, 178, 125, 197, 176, 81, 80, 118, 123, 193, 185
|222, 324, 263, 277, 342, 344, 307, 286, 339, 270, 243, 342, 234, 264, 334, 325, 276, 268, 241, 271, 338, 234, 279, 335, 241, 240, 253, 250, 308, 341, 248, 234, 289, 265, 229, 324, 334, 287, 300, 238, 288
|238, 152, 197, 231, 119, 140, 185, 209, 136, 190, 247, 117, 238, 202, 165, 171, 224, 192, 234, 191, 136, 227, 196, 131, 230, 227, 222, 251, 168, 119, 216, 232, 177, 244, 231, 136, 132, 172, 173, 244, 229
|407, 312, 379, 309, 339, 293, 300, 311, 308, 387, 345, 349, 367, 359, 281, 289, 314, 379, 358, 363, 309, 396, 334, 325, 364, 370, 352, 332, 318, 343, 372, 376, 344, 317, 400, 357, 327, 369, 326, 354, 297
|122, 197, 134, 225, 177, 216, 213, 211, 202, 122, 200, 170, 169, 158, 228, 222, 216, 132, 176, 150, 201, 128, 182, 186, 167, 158, 175, 216, 192, 174, 150, 154, 166, 225, 125, 156, 184, 140, 184, 188, 236
|289, 232, 253, 314, 188, 227, 269, 290, 218, 241, 321, 181, 304, 267, 254, 257, 304, 247, 303, 254, 217, 281, 269, 206, 296, 290, 291, 329, 246, 186, 278, 294, 246, 325, 284, 196, 206, 230, 249, 315, 314
|230, 121, 191, 177, 124, 100, 137, 161, 109, 192, 205, 131, 210, 182, 111, 120, 173, 188, 202, 178, 109, 217, 164, 119, 203, 204, 191, 203, 136, 127, 198, 210, 158, 191, 223, 146, 121, 171, 145, 207, 170
|209, 112, 168, 187, 90, 96, 141, 166, 95, 164, 206, 93, 202, 168, 119, 125, 180, 164, 197, 159, 96, 197, 157, 96, 194, 192, 184, 209, 129, 92, 183, 198, 143, 200, 202, 111, 97, 145, 135, 205, 184
|229, 251, 245, 169, 295, 259, 215, 194, 266, 261, 167, 303, 191, 224, 234, 229, 179, 251, 189, 238, 266, 230, 215, 277, 198, 206, 198, 155, 237, 297, 219, 205, 240, 158, 229, 291, 277, 263, 235, 175, 170
|395, 301, 367, 297, 329, 282, 289, 299, 297, 376, 332, 339, 355, 347, 270, 277, 302, 368, 346, 351, 298, 384, 322, 315, 352, 358, 340, 320, 307, 332, 360, 364, 333, 305, 389, 347, 317, 358, 315, 341, 284
|255, 265, 239, 331, 220, 273, 297, 309, 258, 223, 320, 210, 293, 264, 298, 296, 320, 234, 296, 250, 257, 254, 279, 240, 286, 278, 288, 334, 271, 217, 265, 278, 255, 337, 254, 211, 239, 226, 267, 310, 337
|277, 179, 247, 185, 208, 161, 170, 183, 176, 255, 221, 218, 240, 228, 149, 157, 188, 247, 231, 231, 177, 265, 203, 193, 236, 241, 223, 210, 186, 212, 241, 248, 212, 195, 270, 226, 195, 237, 194, 228, 173
|121, 182, 148, 114, 216, 198, 155, 130, 198, 162, 88, 221, 96, 133, 180, 172, 117, 154, 99, 147, 198, 125, 137, 202, 105, 110, 111, 88, 165, 217, 123, 106, 156, 101, 123, 205, 201, 170, 159, 89, 123
|460, 357, 427, 368, 376, 337, 352, 367, 350, 434, 404, 385, 423, 410, 330, 338, 371, 427, 414, 412, 351, 447, 386, 366, 420, 425, 407, 393, 366, 380, 424, 431, 392, 378, 452, 397, 368, 414, 375, 412, 356
|143, 201, 170, 129, 237, 216, 172, 148, 217, 184, 106, 242, 118, 154, 197, 189, 134, 176, 120, 168, 217, 147, 157, 222, 126, 132, 132, 104, 184, 238, 145, 128, 177, 116, 145, 226, 221, 192, 179, 108, 137
|257, 227, 228, 305, 180, 228, 263, 281, 216, 214, 304, 170, 282, 247, 256, 256, 295, 222, 283, 233, 215, 251, 256, 200, 275, 268, 273, 315, 238, 177, 254, 270, 231, 314, 254, 180, 199, 208, 238, 297, 308
|215, 324, 253, 306, 325, 345, 321, 305, 335, 252, 270, 321, 249, 265, 345, 336, 301, 255, 258, 266, 334, 228, 288, 325, 252, 248, 265, 284, 311, 323, 250, 241, 286, 298, 222, 304, 323, 273, 302, 261, 318
|230, 191, 223, 127, 238, 188, 156, 147, 201, 238, 153, 248, 183, 197, 161, 160, 138, 228, 176, 210, 201, 224, 177, 217, 185, 194, 177, 136, 183, 241, 203, 197, 200, 126, 226, 243, 218, 230, 186, 164, 119
|236, 209, 207, 286, 161, 211, 245, 261, 198, 193, 284, 152, 262, 227, 238, 238, 275, 201, 262, 212, 197, 230, 236, 182, 254, 247, 252, 295, 219, 159, 234, 249, 211, 295, 233, 160, 181, 188, 218, 276, 289
|90, 184, 114, 197, 174, 204, 193, 186, 192, 107, 167, 169, 138, 135, 212, 204, 189, 114, 145, 130, 191, 100, 160, 179, 137, 128, 147, 184, 175, 172, 123, 124, 149, 195, 96, 153, 177, 127, 167, 156, 208
|358, 282, 338, 252, 321, 269, 259, 262, 284, 351, 285, 331, 313, 315, 248, 253, 260, 341, 304, 323, 285, 348, 290, 303, 312, 320, 301, 270, 283, 324, 325, 325, 307, 257, 352, 335, 305, 336, 290, 296, 240
|249, 169, 209, 249, 133, 158, 203, 226, 153, 201, 263, 130, 253, 216, 184, 189, 241, 204, 249, 205, 153, 239, 212, 146, 245, 241, 237, 268, 185, 132, 229, 246, 192, 262, 243, 148, 147, 185, 189, 260, 247
|152, 259, 188, 250, 257, 280, 259, 246, 269, 185, 215, 253, 190, 202, 282, 273, 244, 189, 199, 202, 268, 164, 225, 258, 193, 187, 205, 230, 247, 255, 187, 181, 222, 244, 159, 236, 256, 206, 238, 205, 262
|];
E_ij = 
[|389, 355, 348, 468, 284, 359, 408, 432, 339, 325, 463, 269, 429, 378, 399, 400, 452, 338, 431, 356, 338, 381, 393, 314, 418, 407, 416, 482, 369, 279, 387, 410, 355, 481, 384, 280, 313, 319, 368, 452, 474
|89, 235, 128, 245, 242, 267, 239, 227, 251, 131, 204, 240, 159, 152, 271, 259, 232, 132, 169, 149, 250, 98, 189, 238, 155, 142, 169, 229, 217, 240, 133, 136, 179, 243, 93, 212, 235, 160, 204, 187, 261
|402, 350, 355, 467, 279, 351, 404, 430, 332, 334, 467, 264, 436, 383, 392, 393, 452, 346, 436, 361, 331, 392, 394, 309, 424, 414, 420, 483, 366, 274, 394, 418, 356, 481, 396, 279, 308, 324, 366, 456, 471
|123, 286, 184, 268, 301, 318, 280, 260, 305, 191, 218, 300, 177, 197, 316, 303, 258, 190, 190, 201, 304, 142, 230, 294, 180, 172, 199, 241, 266, 299, 174, 162, 231, 260, 134, 272, 292, 219, 253, 201, 286
|224, 197, 174, 296, 142, 216, 244, 261, 192, 153, 288, 128, 254, 202, 248, 243, 280, 164, 255, 180, 191, 212, 219, 165, 243, 232, 240, 306, 203, 136, 212, 236, 181, 307, 217, 116, 162, 143, 198, 276, 304
|308, 190, 247, 312, 132, 179, 243, 276, 166, 236, 329, 128, 312, 257, 220, 225, 299, 240, 307, 240, 166, 292, 252, 153, 300, 294, 289, 338, 213, 132, 277, 302, 221, 330, 299, 155, 154, 211, 218, 324, 311
|380, 533, 442, 462, 560, 563, 508, 476, 555, 452, 412, 561, 398, 443, 548, 535, 462, 449, 409, 454, 554, 398, 466, 550, 408, 408, 426, 423, 509, 559, 420, 398, 481, 445, 390, 533, 548, 478, 497, 404, 479
|420, 291, 358, 410, 242, 273, 341, 376, 267, 348, 433, 239, 420, 366, 311, 319, 399, 351, 414, 350, 267, 403, 357, 259, 408, 403, 396, 440, 316, 242, 387, 411, 329, 429, 410, 267, 261, 322, 323, 429, 407
|651, 508, 608, 504, 549, 480, 491, 507, 502, 621, 557, 564, 591, 578, 462, 473, 511, 609, 577, 585, 504, 634, 541, 528, 587, 596, 568, 538, 518, 554, 598, 605, 556, 516, 641, 576, 531, 594, 530, 571, 485
|244, 357, 262, 399, 327, 385, 381, 378, 364, 245, 361, 316, 315, 298, 404, 394, 386, 259, 325, 286, 363, 253, 335, 340, 311, 298, 324, 386, 349, 322, 286, 293, 311, 399, 249, 295, 337, 271, 337, 344, 415
|469, 385, 416, 507, 318, 377, 439, 471, 363, 398, 517, 308, 493, 437, 418, 422, 493, 407, 490, 417, 362, 457, 440, 346, 481, 472, 473, 530, 406, 316, 453, 478, 406, 524, 462, 330, 346, 382, 409, 509, 508
|406, 243, 347, 327, 247, 212, 267, 303, 224, 349, 368, 258, 376, 334, 228, 241, 321, 344, 365, 328, 225, 387, 307, 240, 365, 367, 348, 365, 266, 252, 358, 377, 299, 347, 395, 280, 243, 318, 278, 372, 316
|370, 224, 308, 337, 192, 201, 268, 305, 199, 303, 365, 196, 359, 308, 235, 244, 327, 302, 351, 295, 200, 352, 292, 200, 347, 345, 332, 370, 249, 194, 330, 353, 270, 357, 360, 223, 202, 273, 259, 364, 332
|384, 417, 408, 294, 483, 429, 363, 331, 440, 432, 290, 495, 327, 376, 391, 383, 308, 417, 324, 397, 440, 385, 363, 456, 337, 349, 338, 273, 395, 486, 369, 348, 400, 277, 384, 477, 456, 435, 393, 302, 296
|660, 518, 618, 512, 560, 491, 500, 516, 513, 631, 566, 575, 600, 588, 472, 483, 520, 619, 586, 594, 515, 643, 551, 539, 596, 605, 577, 547, 528, 566, 607, 614, 566, 525, 650, 588, 542, 604, 540, 579, 494
|439, 454, 415, 553, 387, 466, 502, 519, 443, 391, 536, 371, 495, 452, 503, 500, 537, 407, 500, 431, 442, 437, 475, 416, 486, 473, 489, 557, 462, 381, 454, 473, 439, 562, 438, 373, 414, 396, 457, 521, 562
|450, 303, 405, 312, 346, 276, 289, 309, 298, 417, 365, 361, 394, 376, 258, 270, 316, 405, 381, 381, 299, 432, 339, 324, 388, 396, 369, 349, 314, 352, 396, 406, 352, 327, 440, 373, 327, 389, 326, 377, 294
|217, 309, 258, 208, 360, 333, 268, 232, 334, 279, 168, 368, 181, 236, 307, 295, 212, 268, 185, 256, 333, 223, 242, 339, 193, 201, 203, 169, 284, 362, 221, 196, 271, 188, 220, 344, 338, 292, 275, 169, 221
|726, 572, 677, 588, 601, 541, 564, 586, 562, 687, 642, 614, 671, 651, 531, 544, 593, 677, 658, 654, 563, 707, 615, 585, 666, 673, 646, 626, 586, 606, 672, 683, 624, 603, 715, 631, 588, 658, 599, 654, 571
|283, 370, 323, 262, 423, 392, 326, 290, 394, 344, 227, 431, 245, 300, 364, 352, 269, 332, 248, 320, 394, 288, 303, 401, 257, 266, 266, 225, 345, 425, 285, 261, 334, 242, 286, 408, 400, 356, 337, 231, 274
|425, 380, 382, 497, 309, 382, 434, 460, 363, 360, 495, 295, 463, 410, 423, 424, 481, 372, 464, 389, 362, 416, 423, 340, 451, 441, 448, 512, 396, 305, 421, 444, 385, 511, 420, 309, 338, 351, 396, 484, 501
|363, 526, 420, 499, 527, 558, 521, 498, 543, 418, 446, 522, 413, 438, 557, 544, 492, 423, 427, 440, 542, 382, 472, 528, 419, 412, 438, 466, 506, 524, 415, 402, 470, 487, 374, 496, 525, 449, 493, 432, 518
|408, 348, 397, 253, 419, 344, 297, 282, 363, 420, 291, 434, 337, 358, 303, 303, 269, 404, 326, 377, 364, 398, 327, 388, 340, 353, 328, 266, 337, 423, 366, 358, 362, 251, 402, 427, 390, 407, 342, 308, 240
|386, 346, 343, 461, 274, 349, 399, 424, 329, 321, 458, 260, 425, 373, 389, 390, 445, 334, 426, 351, 328, 378, 386, 305, 413, 403, 411, 475, 361, 270, 383, 406, 348, 474, 381, 272, 304, 314, 360, 447, 466
|199, 339, 235, 359, 325, 370, 352, 342, 351, 224, 314, 317, 270, 265, 381, 370, 346, 234, 281, 258, 350, 213, 303, 331, 268, 256, 284, 339, 326, 321, 248, 249, 287, 355, 207, 292, 328, 254, 313, 297, 376
|593, 479, 564, 434, 537, 459, 445, 450, 483, 582, 484, 553, 525, 528, 429, 436, 446, 568, 512, 540, 484, 579, 491, 510, 524, 536, 508, 461, 481, 543, 543, 543, 517, 441, 585, 558, 513, 560, 491, 500, 417
|420, 300, 360, 420, 245, 284, 350, 385, 275, 347, 441, 241, 425, 371, 322, 330, 408, 352, 420, 354, 275, 404, 364, 266, 413, 407, 401, 449, 324, 245, 390, 415, 334, 439, 411, 268, 267, 323, 330, 436, 417
|263, 423, 317, 410, 421, 455, 424, 404, 439, 313, 358, 415, 321, 338, 458, 445, 401, 319, 334, 338, 438, 281, 373, 423, 324, 316, 343, 380, 405, 418, 316, 307, 368, 401, 274, 389, 420, 344, 392, 343, 428
|];

% Define sets I and J
int: I;
int: J;

int: C; % Cost of installing a warehouse in all zones
int: CV; % Capacity in green zone
int: CC; % Capacity in blue zone

array[1..I] of int: O_i; % Emissions per operation for each warehouse i
array[1..I, 1..J] of int: D_ij; % Distance between warehouse i and store j
array[1..I, 1..J] of int: E_ij; % Transportation emissions
array[1..I] of int: V_i; % 1 if warehouse i is in the green zone, 0 if in the blue zone

% Define decision variables
array[1..I, 1..J] of var 0..1: X; % 1 if warehouse i supplies store j, 0 otherwise
array[1..I] of var 0..1: Y;

% Define constraints

% Add the constraint to ensure Y_i is 1 if the warehouse I supplies at least one store
constraint forall(i in 1..I)(
  sum(j in 1..J)(X[i,j]) > 0 -> Y[i] == 1
);

% Emissions constraint
constraint sum(i in 1..I, j in 1..J)(E_ij[i, j] * X[i, j]) + sum(i in 1..I)(O_i[i] * Y[i]) <= 500 * J;

% Assignment constraint
constraint forall(j in 1..J)(sum(i in 1..I)(X[i, j]) == 1);

% Green zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * V_i[i]) <= CV);

% Blue zone capacity constraint
constraint forall(i in 1..I)(sum(j in 1..J)(X[i, j] * (1 - V_i[i])) <= CC);

% Solve the optimization problem using a solver
% Define the objective function
solve minimize sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i]);

output ["Solution:", ""];
output ["X = \n", show2d(X), ";"];
output ["\n"];
output ["Y = ", show(Y), ";"];
output ["\n"];
output ["FO = ", show(sum(i in 1..I, j in 1..J)(1.25 * D_ij[i, j] * X[i, j]) + sum(i in 1..I)(C * Y[i])), "\n"];